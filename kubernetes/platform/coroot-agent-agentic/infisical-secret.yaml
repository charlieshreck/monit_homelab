---
# InfisicalSecret to pull Coroot agent API key from Infisical
# The API key is stored at:
# - Project: prod_homelab (slug: prod-homelab-y-nij)
# - Environment: prod
# - Path: /monitoring/coroot
# - Key: agentic_apikey
apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: coroot-agent-apikey
  namespace: coroot-agent
spec:
  hostAPI: https://app.infisical.com/api
  resyncInterval: 60
  authentication:
    universalAuth:
      credentialsRef:
        secretName: universal-auth-credentials
        secretNamespace: infisical-operator-system
      secretsScope:
        projectSlug: prod-homelab-y-nij
        envSlug: prod
        secretsPath: /monitoring/coroot
  managedSecretReference:
    secretName: coroot-agent-apikey
    secretType: Opaque
    secretNamespace: coroot-agent
    creationPolicy: Owner
